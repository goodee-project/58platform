<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="goodee.gdj58.platform.mapper.QuestionMapper">
	
	<!-- 답변페이지 문의내용 조회 폼 -->
	<select id="selectQuestionByComment" parameterType="int" resultType="goodee.gdj58.platform.vo.Question">
		SELECT
			question_title
			, question_memo
			, service_name
			, id
		FROM question
		WHERE question_no = #{questionNo}
	</select>
	
	<!-- 쇼핑업체 문의사항 리스트 -->
	<select id="selectShoppingQuestionList" resultType="java.util.Map">
		SELECT
			q.question_no questionNo
			, q.question_title questionTitle
			, q.service_name serviceName
			, sc.company_id companyId
			, sc.company_name companyName
			, q.createdate createdate
			, qa.question_comment questionComment
			, qa.createdate qaCreatedate
		FROM question q
		LEFT JOIN question_answer qa
		ON q.question_no = qa.question_no
		INNER JOIN shopping_company sc
		ON q.id = sc.company_id
	</select>
	
	<!-- 예약업체 문의사항 리스트 -->
	<select id="selectBookingQuestionList" resultType="java.util.Map">
		SELECT 
			q.question_no questionNo
			, q.question_title questionTitle
			, q.service_name serviceName
			, bc.booking_company_id companyId
			, bc.booking_company_name companyName
			, q.createdate createdate
			, qa.question_comment questionComment
			, qa.createdate qaCreatedate
		FROM question q 
		LEFT JOIN question_answer qa
		ON q.question_no = qa.question_no
		INNER JOIN booking_company bc
		ON q.id = bc.booking_company_id
	</select>
</mapper>